
const quizService = require("../services/quizzes-service")

// this anonymous function deals with the requests for quizzes
module.exports = (app) => {

    const findAllQuizzes = (req, res) => {
        res.send(quizService.findAllQuizzes())
    }


    const findQuizById = (req, res) => {
        // param is a map generated by request and parses out path var
        const quizId = req.params["qid"]
        const quiz = quizService.findQuizById(quizId)
        res.send(quiz)
    }


    // const createQuiz = (req, res) => {
    //     const quiz = {
    //         _id: new Date().getTime() + "",
    //         title: "New Quiz"
    //     }
    //     quizzes.push(quiz)
    //     res.send(quiz)
    // }


    // const deleteQuiz = (req, res) => {
    //     const quizId = req.params.qid
    //     quizzes = quizzes.filter(quiz => quiz._id !== quizId)
    //     // res.send(quizzes)
    //     res.send(200)
    // }


    // const updateQuiz = (req, res) => {
    //     // everything sent from client is in request object
    //     const quizId = req.params.qid
    //     const newQuiz = req.body
    //     // use map to rebuild the array
    //     quizzes = quizzes.map(quiz => quiz._id === quizId ? newQuiz : quiz)
    //     res.send(200)
    // }



    app.get("/api/quizzes", findAllQuizzes)
    app.get("/api/quizzes/:qid", findQuizById)

    // app.post("/api/quizzes", createQuiz)
    // app.delete("/api/quizzes/:qid", deleteQuiz)
    // app.put("/api/quizzes/:qid", updateQuiz)


}


// Node.js export mechanism
// whoever assigned to exports becomes available to require function
// module.exports = service
